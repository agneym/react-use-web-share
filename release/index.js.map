{"version":3,"file":"index.js","sources":["../src/share-content.ts","../src/get-url.ts","../src/index.ts"],"sourcesContent":["import getUrl from \"./get-url\";\n\n/**\n * Trigger native share popup\n */\nfunction shareContent(onSuccess: () => void, onError: () => void) {\n  return function (config: Partial<IShareConfig>) {\n    const url = getUrl(config.url);\n    const title = config.title || document.title;\n    const text = config.text;\n    navigator\n      .share({ text, title, url })\n      .then(onSuccess)\n      .catch(onError);\n  };\n}\n\nexport default shareContent;","/**\n * Get the URL to be shared.\n * If the site uses canonical URL, then use that URL otherwise the current URL\n * @param url URL that might be passed on by the user\n */\nfunction getUrl(url?: string) {\n  if(!!url) {\n    return url;\n  } else {\n    const canonicalEl = document.querySelector('link[rel=canonical]') as HTMLLinkElement;\n    return canonicalEl ? canonicalEl.href : window.location.href;\n  }\n}\n\nexport default getUrl;","import { useState, useEffect } from 'react';\n\nimport shareContent from \"./share-content\";\n\n/**\n * Use native web share dialog when available\n * @param onSuccess function called on successfully sharing content\n * @param onError callback function called on error sharing content\n * @example \n * const { isSupported, isLoading, share } = useWebShare(successFn, errorFn);\n */\nfunction useWebShare(onSuccess = () => { }, onError = () => { }) {\n  const [loading, setLoading] = useState(true);\n  const [isSupported, setSupport] = useState(false);\n\n  useEffect(\n    () => {\n      if (!!navigator.share) {\n        setSupport(true);\n      } else {\n        setSupport(false);\n      }\n      setLoading(false);\n    },\n    [onSuccess, onError]\n  );\n\n  return {\n    loading,\n    isSupported,\n    share: shareContent(onSuccess, onError),\n  };\n}\n\nexport default useWebShare;\n"],"names":["shareContent","onSuccess","onError","config","url","canonicalEl","document","querySelector","href","window","location","getUrl","title","navigator","share","text","then","catch","useState","useEffect","setSupport","setLoading","loading","isSupported"],"mappings":"uBAKA,SAASA,EAAaC,EAAuBC,UACpC,SAAUC,OACTC,ECFV,SAAgBA,MACTA,SACIA,MAEDC,EAAcC,SAASC,cAAc,8BACpCF,EAAcA,EAAYG,KAAOC,OAAOC,SAASF,KDH5CG,CAAOR,EAAOC,KACpBQ,EAAQT,EAAOS,OAASN,SAASM,MAEvCC,UACGC,MAAM,MAFIX,EAAOY,WAEHH,MAAOR,IACrBY,KAAKf,GACLgB,MAAMf,mBEFb,SAAqBD,EAAuBC,mEACZgB,YAAS,mBACLA,YAAS,wBAE3CC,uBAEUN,UAAUC,MACdM,GAAW,GAEXA,GAAW,GAEbC,GAAW,IAEb,CAACpB,EAAWC,IAGP,SACLoB,cACAC,EACAT,MAAOd,EAAaC,EAAWC"}